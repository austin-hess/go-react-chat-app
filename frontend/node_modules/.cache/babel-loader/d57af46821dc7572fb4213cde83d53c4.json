{"ast":null,"code":"class ChatroomConnection {\n  constructor(roomId) {\n    this.state = {\n      messageHandler: undefined\n    };\n    console.log(`Creating connection for room: ${roomId}`);\n    this.setMessageHandler = this.setMessageHandler.bind(this);\n    this.socket = new WebSocket(`ws://localhost:8080/ws/${roomId}`);\n    console.log(\"Attempting Connection...\");\n\n    this.socket.onopen = () => {\n      console.log(\"Successfully connected!\");\n    };\n\n    this.socket.onmessage = msg => {\n      console.log(`Message received: ${JSON.stringify(msg)}`);\n\n      if (this.state.messageHandler) {\n        this.messageHandler(msg);\n      }\n    };\n\n    this.socket.onclose = event => {\n      console.log(\"Socket closed connection \", event);\n    };\n\n    this.socket.onerror = err => {\n      console.log(\"Socket error: \", err);\n    };\n  }\n\n  setMessageHandler(handler) {\n    this.setState({\n      messageHandler: handler\n    });\n  }\n\n  sendMessage(msg) {\n    console.log(`Sending message: ${msg}`);\n    this.socket.send(msg);\n  }\n\n  end() {\n    // Normal closure\n    this.socket.close(1000);\n  }\n\n}\n\nexport default ChatroomConnection;","map":{"version":3,"sources":["/Users/austinhess/Development/projects/go-react/frontend/src/api/ChatroomConnection/ChatroomConnection.js"],"names":["ChatroomConnection","constructor","roomId","state","messageHandler","undefined","console","log","setMessageHandler","bind","socket","WebSocket","onopen","onmessage","msg","JSON","stringify","onclose","event","onerror","err","handler","setState","sendMessage","send","end","close"],"mappings":"AAAA,MAAMA,kBAAN,CAAyB;AACrBC,EAAAA,WAAW,CAACC,MAAD,EAAS;AAChB,SAAKC,KAAL,GAAa;AACTC,MAAAA,cAAc,EAAEC;AADP,KAAb;AAGAC,IAAAA,OAAO,CAACC,GAAR,CAAa,iCAAgCL,MAAO,EAApD;AACA,SAAKM,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKC,MAAL,GAAc,IAAIC,SAAJ,CAAe,0BAAyBT,MAAO,EAA/C,CAAd;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;;AACA,SAAKG,MAAL,CAAYE,MAAZ,GAAqB,MAAM;AACvBN,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACH,KAFD;;AAGA,SAAKG,MAAL,CAAYG,SAAZ,GAAyBC,GAAD,IAAS;AAC7BR,MAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBQ,IAAI,CAACC,SAAL,CAAeF,GAAf,CAAoB,EAArD;;AACA,UAAI,KAAKX,KAAL,CAAWC,cAAf,EAA+B;AAC3B,aAAKA,cAAL,CAAoBU,GAApB;AACH;AACJ,KALD;;AAMA,SAAKJ,MAAL,CAAYO,OAAZ,GAAuBC,KAAD,IAAW;AAC7BZ,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCW,KAAzC;AACH,KAFD;;AAGA,SAAKR,MAAL,CAAYS,OAAZ,GAAuBC,GAAD,IAAS;AAC3Bd,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8Ba,GAA9B;AACH,KAFD;AAGH;;AAEDZ,EAAAA,iBAAiB,CAACa,OAAD,EAAU;AACvB,SAAKC,QAAL,CAAc;AACVlB,MAAAA,cAAc,EAAEiB;AADN,KAAd;AAGH;;AAEDE,EAAAA,WAAW,CAACT,GAAD,EAAM;AACbR,IAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBO,GAAI,EAApC;AACA,SAAKJ,MAAL,CAAYc,IAAZ,CAAiBV,GAAjB;AACH;;AAEDW,EAAAA,GAAG,GAAG;AACF;AACA,SAAKf,MAAL,CAAYgB,KAAZ,CAAkB,IAAlB;AACH;;AAxCoB;;AA2CzB,eAAe1B,kBAAf","sourcesContent":["class ChatroomConnection {\n    constructor(roomId) {\n        this.state = {\n            messageHandler: undefined\n        };\n        console.log(`Creating connection for room: ${roomId}`);\n        this.setMessageHandler = this.setMessageHandler.bind(this);\n        this.socket = new WebSocket(`ws://localhost:8080/ws/${roomId}`);\n        console.log(\"Attempting Connection...\");\n        this.socket.onopen = () => {\n            console.log(\"Successfully connected!\");\n        };\n        this.socket.onmessage = (msg) => {\n            console.log(`Message received: ${JSON.stringify(msg)}`);\n            if (this.state.messageHandler) {\n                this.messageHandler(msg);\n            }\n        };\n        this.socket.onclose = (event) => {\n            console.log(\"Socket closed connection \", event);\n        };\n        this.socket.onerror = (err) => {\n            console.log(\"Socket error: \", err);\n        };\n    }\n\n    setMessageHandler(handler) {\n        this.setState({\n            messageHandler: handler\n        });\n    }\n\n    sendMessage(msg) {\n        console.log(`Sending message: ${msg}`);\n        this.socket.send(msg);\n    }\n\n    end() {\n        // Normal closure\n        this.socket.close(1000);\n    }\n}\n\nexport default ChatroomConnection;"]},"metadata":{},"sourceType":"module"}